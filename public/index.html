<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>الرئيسية</title>
  <link rel="icon" type="image/png" href="https://www.dropbox.com/scl/fi/f283e4rvv5cf9x12a1cic/my-website-logo.png?rlkey=yia776im7klypy27af32m0scy&e=1&st=vhaprvzh&dl=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
    body {
      background: linear-gradient(to right, #e0eafc, #cfdef3);
      padding: 20px;
      font-family: 'Segoe UI', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: background 0.4s ease, color 0.4s ease;
    }
    nav {backdrop-filter: blur(8px);background: rgba(13,110,253,0.9)!important;border-radius: 0 0 12px 12px;}
    .navbar-nav .nav-link {transition: all 0.3s ease;padding:8px 14px;border-radius:6px;position:relative;}
    .navbar-nav .nav-link:hover {background:rgba(255,255,255,0.15);transform:translateY(-2px);}
    .navbar-nav .nav-link::after {content:'';position:absolute;width:0;height:2px;left:0;bottom:0;background:white;transition:width 0.3s ease;}
    .navbar-nav .nav-link:hover::after,.navbar-nav .nav-link.active::after {width:100%;}
    .scrolled {box-shadow:0 4px 12px rgba(0,0,0,0.25)!important;}

    /* Spinner + Overlay */
    #loadingOverlay {
      display:none;
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background:rgba(0,0,0,0.4);
      z-index:2999;
      opacity:0;
      transition:opacity 0.3s ease;
    }
    #loadingOverlay.active { display:block; opacity:1; }

    #loadingSpinner {
      position:fixed;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      z-index:3000;
      text-align:center;
      opacity:0;
      transition:opacity 0.3s ease;
    }
    #loadingSpinner.active { opacity:1; }
    #loadingSpinner .spinner-border { width:3rem; height:3rem; }
    #loadingSpinner .loading-text { margin-top:10px; font-weight:bold; color:#0d6efd; }

    /* باقي التنسيقات كما هي */
    .video-card {background:white;border-radius:15px;box-shadow:0 4px 12px rgba(0,0,0,0.12);padding:14px;margin:8px;width:300px;
      display:flex;flex-direction:column;justify-content:flex-start;transition:transform 0.3s ease, box-shadow 0.3s ease;}
    .video-card:hover {transform:translateY(-6px) scale(1.03);box-shadow:0 8px 20px rgba(0,0,0,0.18);}
    .video-title {font-weight:bold;margin-bottom:6px;min-height:48px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;}
    .video-description {color:#0d6efd;cursor:pointer;min-height:40px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-bottom:8px;}
    select, input[type="text"] {border-radius: 10px!important;border: 2px solid #0d6efd!important;transition: all 0.3s ease;}
    select:focus, input[type="text"]:focus {box-shadow:0 0 8px rgba(13,110,253,0.6)!important;transform: scale(1.02);}
    .search-wrapper {position: relative;display: inline-block;width: 100%;}
    .search-wrapper input {padding-inline-end: 36px;}
    #clearSearch {position: absolute;inset-inline-end: 10px;top: 50%;transform: translateY(-50%);background: transparent;border: none;font-size: 20px;color: #666;cursor: pointer;display: none;line-height: 1;}
    #clearSearch:hover {color: #000;}
    .popout-button {background:linear-gradient(to right,#0d6efd,#0b5ed7);color:white;border:none;padding:8px 14px;border-radius:8px;cursor:pointer;margin-top:6px;transition:all 0.3s ease;}
    .popout-button:hover {background:linear-gradient(to right,#0b5ed7,#084298);transform:scale(1.05);}
    .toast-container {position: fixed;top: 30%;left: 50%;transform: translate(-50%, -50%);z-index: 2000;animation: fadeIn 0.5s ease;}
    @keyframes fadeIn {from{opacity:0;transform:translate(-50%,-40%);}to{opacity:1;transform:translate(-50%,-50%);}}
    footer {text-align:center;margin-top:10px;font-weight:bold;color:#333;font-size:1.1rem;animation:glow 1.5s infinite alternate;}
    @keyframes glow {from{color:#333;text-shadow:none;}to{color:#0d6efd;text-shadow:0 0 10px #0d6efd;}}
    body.dark-mode {background:#121212!important;color:#eaeaea!important;}
    body.dark-mode nav {background:rgba(34,34,34,0.95)!important;}
    body.dark-mode .video-card {background:#1e1e1e;color:#ddd;}
    body.dark-mode .video-description {color:#9bbcff;}
    .video-grid {display: grid;grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));gap: 16px;justify-content: center;margin-top: 20px;}
    .video-card {width: 100% !important;}
    body.dark-mode .modal-content {background-color: #1e1e1e;color: #eaeaea;}
    body.dark-mode .modal-header {border-bottom: 1px solid #444;}
    body.dark-mode .modal-body {color: #eaeaea;}
    body.dark-mode .modal-title {color: #fff;}
    body.dark-mode .btn-close {filter: invert(1) grayscale(100%) brightness(200%);}
    body:not(.dark-mode) .modal-content {background-color: #fff;color: #212529;}
    body:not(.dark-mode) .modal-title {color: #000;}
  </style>
</head>
<body>

<!-- ✅ Overlay + Spinner -->
<div id="loadingOverlay"></div>
<div id="loadingSpinner">
  <div class="spinner-border text-primary" role="status"></div>
  <div class="loading-text">جاري التحميل...</div>
</div>

<nav id="mainNavbar" class="navbar navbar-expand-lg sticky-top shadow-sm">
  <!-- باقي الكود كما هو -->
</nav>

<!-- باقي الصفحة كما هي ... -->

<script>
// مثال: تفعيل/إخفاء الـ Spinner
function showLoading() {
  document.getElementById("loadingOverlay").classList.add("active");
  document.getElementById("loadingSpinner").classList.add("active");
}
function hideLoading() {
  document.getElementById("loadingOverlay").classList.remove("active");
  document.getElementById("loadingSpinner").classList.remove("active");
}

// مثال دمجه مع تحميل الفيديوهات
async function fetchVideos() {
  try {
    showLoading();
    const res = await fetch(`${API_BASE}/api/videos`);
    videos = await res.json();
    populateDepartmentOptions();
  } catch (err) {
    console.error('فشل تحميل الفيديوهات:', err);
  } finally {
    hideLoading();
  }
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
